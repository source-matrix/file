<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>محسّن الصور الاحترافي | Brand AI</title>
<style>
/* ======= Reset & Base ======= */
* { margin:0; padding:0; box-sizing:border-box; font-family:'Tajawal', sans-serif; }
body { background:#0f172a; color:white; overflow-x:hidden; min-height:100vh; }

/* ======= Animated Background ======= */
.bg-animated {
  position:fixed; top:0; left:0; width:100%; height:100%; z-index:0; overflow:hidden;
}
.bg-animated::before {
  content:'';
  position:absolute; top:-50%; left:-50%; width:200%; height:200%;
  background: radial-gradient(circle, rgba(99,102,241,0.1) 0%, transparent 50%),
             radial-gradient(circle at 80% 20%, rgba(236,72,153,0.1) 0%, transparent 40%),
             radial-gradient(circle at 20% 80%, rgba(34,211,238,0.1) 0%, transparent 40%);
  animation:bgRotate 30s linear infinite;
}
@keyframes bgRotate { 0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }

/* ======= Glass Effect ======= */
.glass { background: rgba(255,255,255,0.05); backdrop-filter: blur(20px); border:1px solid rgba(255,255,255,0.1); border-radius:20px; }
.glass-strong { background: rgba(255,255,255,0.1); backdrop-filter: blur(30px); border:1px solid rgba(255,255,255,0.2); border-radius:20px; }

/* ======= Buttons ======= */
button { cursor:pointer; transition:0.3s; border:none; }
.btn-primary { background: linear-gradient(135deg,#6366f1,#8b5cf6,#a855f7); padding:15px 30px; border-radius:50px; color:white; font-weight:bold; font-size:1.1rem; position:relative; overflow:hidden; }
.btn-primary::before { content:''; position:absolute; top:0; left:-100%; width:100%; height:100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition:left 0.5s ease; }
.btn-primary:hover::before { left:100%; }
.btn-primary:hover { transform:translateY(-3px) scale(1.02); box-shadow:0 10px 30px rgba(99,102,241,0.5); }

.btn-magic { background: linear-gradient(135deg,#f472b6,#ec4899,#a855f7,#6366f1,#22d3ee); background-size:300% 300%; animation:gradientShift 4s ease infinite; padding:15px 30px; border-radius:50px; font-weight:bold; }
@keyframes gradientShift { 0%,100%{background-position:0% 50%;}50%{background-position:100% 50%;} }
.btn-magic:hover { transform:translateY(-5px) scale(1.05); box-shadow:0 10px 40px rgba(236,72,153,0.6); }

.btn-download { background: linear-gradient(135deg,#10b981,#059669); padding:12px 25px; border-radius:50px; color:white; font-weight:bold; }
.btn-download:hover { transform:translateY(-3px); box-shadow:0 10px 30px rgba(16,185,129,0.5); }

/* ======= Upload Zone ======= */
.upload-zone { border:3px dashed rgba(255,255,255,0.2); padding:40px; text-align:center; border-radius:20px; position:relative; }
.upload-zone:hover { border-color:#8b5cf6; box-shadow:0 0 40px rgba(139,92,246,0.2); }
.upload-zone input { display:none; }

/* ======= Images & Preview ======= */
.image-container { position:relative; border-radius:20px; overflow:hidden; transition:all 0.5s; margin-bottom:20px; }
.image-container img { width:100%; height:auto; transition: transform 0.5s; }
.image-container:hover img { transform:scale(1.05); }

/* ======= Comparison Slider ======= */
.comparison-container { position:relative; width:100%; height:400px; overflow:hidden; border-radius:20px; margin-bottom:20px; }
.before-wrapper { position:absolute; top:0; left:0; width:50%; height:100%; overflow:hidden; }
.before-wrapper img { width:100%; height:100%; object-fit:contain; }
.after-image { width:100%; height:100%; object-fit:contain; }
.comparison-slider { position:absolute; top:0; bottom:0; width:4px; background:white; cursor:ew-resize; z-index:10; left:50%; transform:translateX(-50%); }

/* ======= Loader ======= */
.loader { width:60px; height:60px; border:4px solid rgba(255,255,255,0.1); border-top-color:#8b5cf6; border-radius:50%; animation:spin 1s linear infinite; margin:auto; }
@keyframes spin { to{transform:rotate(360deg);} }
.loading-text { background: linear-gradient(90deg,#8b5cf6,#ec4899,#22d3ee,#8b5cf6); background-size:300% 100%; -webkit-background-clip:text; color:transparent; animation:textShift 2s linear infinite; text-align:center; font-size:1.5rem; margin-top:10px; }
@keyframes textShift {0%{background-position:0% 50%;}100%{background-position:300% 50%;}}

/* ======= Header ======= */
header { position:sticky; top:0; background: rgba(15,23,42,0.5); backdrop-filter:blur(15px); padding:15px 30px; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid rgba(255,255,255,0.1); z-index:50; }
header h1 { font-size:1.8rem; font-weight:bold; background: linear-gradient(90deg,#f472b6,#8b5cf6); -webkit-background-clip:text; color:transparent; }

/* ======= Main Layout ======= */
main { padding:40px 20px; z-index:10; position:relative; }

/* ======= Floating & Sparkle ======= */
.floating { animation: float 4s ease-in-out infinite; }
@keyframes float {0%,100%{transform:translateY(0);}25%{transform:translateY(-10px);}75%{transform:translateY(-5px);}}
.sparkle { position:absolute; width:10px; height:10px; background:white; clip-path:polygon(50% 0%,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%); animation:sparkle 2s ease-in-out infinite; }
@keyframes sparkle {0%,100%{opacity:0; transform:scale(0);}50%{opacity:1; transform:scale(1);}}

/* ======= Toast & Modal ======= */
.toast { transform:translateX(100%); opacity:0; transition:all 0.5s; position:fixed; top:20px; right:20px; background:#111827; padding:15px 25px; border-radius:15px; z-index:100; }
.toast.show { transform:translateX(0); opacity:1; }
.modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,0.8); backdrop-filter:blur(10px); display:flex; justify-content:center; align-items:center; z-index:100; }
.modal-content { background:#1e293b; padding:20px; border-radius:20px; max-width:600px; width:90%; }

/* ======= Progress Bar ======= */
.progress-bar { height:6px; border-radius:3px; background: linear-gradient(90deg,#6366f1,#8b5cf6,#a855f7,#ec4899,#f472b6); background-size:200% 100%; animation: progressAnim 1.5s ease infinite; }
@keyframes progressAnim {0%{background-position:0% 50%;}100%{background-position:200% 50%;}}

/* ======= Footer ======= */
footer { padding:20px; text-align:center; color:#aaa; font-size:0.9rem; }

</style>
</head>
<body>
<div class="bg-animated"></div>

<header>
<h1>✨ محسّن الصور الاحترافي</h1>
<button class="btn-primary" id="apiStatus">API متصل ✅</button>
</header>

<main>
<section class="text-center mb-10">
<h2 style="font-size:2rem; margin-bottom:10px;">ارفع صورتك وجعلها احترافية</h2>
<p style="color:#aaa; margin-bottom:20px;">إزالة الخلفية، تحسين الإضاءة، تعديل الألوان تلقائياً بواسطة الذكاء الاصطناعي</p>
<div class="upload-zone" id="uploadZone">
<p>اسحب وافلت صورتك هنا أو اضغط للاختيار</p>
<button class="btn-primary" id="selectFileBtn">اختر صورة</button>
<input type="file" id="fileInput" accept="image/*">
<p style="font-size:0.9rem; color:#777; margin-top:10px;">يدعم JPG, PNG, WEBP • الحد الأقصى: 10MB</p>
</div>
</section>

<section id="previewSection" style="display:none;">
<div class="image-container">
<img id="originalImage" src="" alt="الصورة الأصلية">
</div>
<div class="comparison-container">
<img id="afterImage" class="after-image" src="" alt="بعد التحسين">
<div class="before-wrapper" id="beforeWrapper">
<img id="beforeImage" src="" alt="قبل التحسين">
</div>
<div class="comparison-slider" id="slider"></div>
</div>
<div style="text-align:center; margin-top:20px;">
<button class="btn-magic" id="enhanceBtn">اجعل الصورة احترافية ✨</button>
<button class="btn-download" id="downloadBtn" style="display:none;">تحميل الصورة</button>
</div>
</section>

<div id="loadingState" style="display:none; text-align:center; margin-top:20px;">
<div class="loader"></div>
<div class="loading-text">جاري تحسين صورتك...</div>
</div>

</main>

<footer>جميع الحقوق محفوظة © 2026 | محسّن الصور الاحترافي</footer>

<script>
const uploadZone = document.getElementById('uploadZone');
const fileInput = document.getElementById('fileInput');
const selectFileBtn = document.getElementById('selectFileBtn');
const previewSection = document.getElementById('previewSection');
const originalImage = document.getElementById('originalImage');
const afterImage = document.getElementById('afterImage');
const beforeImage = document.getElementById('beforeImage');
const enhanceBtn = document.getElementById('enhanceBtn');
const downloadBtn = document.getElementById('downloadBtn');
const loadingState = document.getElementById('loadingState');

selectFileBtn.addEventListener('click',()=>fileInput.click());
fileInput.addEventListener('change', e=>{
  const file=e.target.files[0];
  if(!file) return;
  const reader=new FileReader();
  reader.onload=function(ev){
    originalImage.src=ev.target.result;
    beforeImage.src=ev.target.result;
    afterImage.src=ev.target.result;
    previewSection.style.display='block';
  };
  reader.readAsDataURL(file);
});

enhanceBtn.addEventListener('click',async()=>{
  loadingState.style.display='block';
  previewSection.style.display='none';
  const base64 = originalImage.src.split(',')[1];
  try{
    const response=await fetch('https://viscodev.x10.mx/GPT-5-NANO/api.php',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({image:base64})
    });
    const data=await response.json();
    if(data.result){
      afterImage.src = 'data:image/png;base64,' + data.result;
      loadingState.style.display='none';
      previewSection.style.display='block';
      downloadBtn.style.display='inline-block';
    }
  }catch(err){
    alert('حدث خطأ أثناء التحسين');
    console.error(err);
    loadingState.style.display='none';
    previewSection.style.display='block';
  }
});

downloadBtn.addEventListener('click',()=>{
  const a=document.createElement('a');
  a.href=afterImage.src;
  a.download='image-enhanced.png';
  a.click();
});

/* Comparison slider */
const slider=document.getElementById('slider');
let isDown=false;
slider.addEventListener('mousedown',()=>isDown=true);
window.addEventListener('mouseup',()=>isDown=false);
window.addEventListener('mousemove',e=>{
  if(!isDown) return;
  const rect = slider.parentElement.getBoundingClientRect();
  let x = e.clientX - rect.left;
  if(x<0)x=0; if(x>rect.width)x=rect.width;
  document.getElementById('beforeWrapper').style.width = x+'px';
  slider.style.left = x+'px';
});
</script>
</body>
</html>
